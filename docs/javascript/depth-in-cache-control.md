Web缓存分为客户端缓存和服务器端缓存。

# 客户端缓存


# 服务器端缓存或公共缓存

服务器端缓存通常包括静态资源CDN,代理器缓存等。

代理服务器缓存通常用于长期稳定的静态资源如图片，样式文件或Js文件。利用缓存策略可以过滤并减少真正请求原服务器的请求数量。既加快了客户端的加载速度，同时也减少了服务器的压力。

# 客户端缓存

包括强缓存和协商缓存。

## 强缓存

强缓存指利用请求头字段Cache-Control和Expires决定浏览器是否使用缓存。具体实现为：

### Cache-Control

> 通常在浏览器第一次请求某个资源时，服务器端返回请求的同时，设置有Cache-Control响应头字段及对应的值。该字段值所对应的不同的强缓存策略。当Cache-Control和expire或pragma同时存在时，客户端会忽略后者。cache-control字段是http1.1新增的字段，后者是http1.0就有的字段。通常同时设置他们以便兼容老的http版本。

**详细的Cache-Control值及其含义**

cache-control值|含义|使用角色
--|--|--
public|指该请求可缓存，即使请求响应字段不包含Cache-Control和Expires字段|服务端
private|指只对某个用户操作的会话过程中可缓存，如果用户切换，缓存失效。|服务端
no-cache|指总是向服务端发出请求,这种方式通常和协商缓存混合使用|服务端或客户端
no-store|指客户端禁止存储任何客户端请求或服务端响应的任何数据，可以理解为禁用任何形式的缓存策略|服务端或客户端
no-transform|不能转换资源类型或格式|服务端或客户端
max-age|指定当前请求缓存过期时间（单位秒，以当前请求事件开始计算）|服务端和客户端
must-revalidate|告诉客户端一旦缓存过期，必须重新验证才能使用|服务端

s-maxage|指定过期时间（但只限于在公共缓存服务器上使用）|服务端
proxy-revalidate|和must-revalidate一样，但只用于代理缓存|服务端


### Expires
Expires字段指定一个日期/实践绝对值。在系统时间在该时间后，缓存失效。

> 当Expires和Cache-Control字段值max-age或s-maxage同时存在时，Expires字段会被浏览器忽略。


```
Expires: Wed, 21 Oct 2015 07:28:00 GMT
```
## 协商缓存

当强缓存没有命中的时候，浏览器一定会发送一个请求到服务器。通过服务器端依据资源的另外一些http header验证这个资源是否命中协商缓存。如果协商缓存命中，
服务器会将这个请求返回（304）。但是不会返回这个资源的数据，而是告诉客户端可以直接从缓存中加载这个资源。于是浏览器就又会从自己的缓存中去加载这个资源；
若未命中请求，则将资源返回客户端，并更新本地缓存数据（200）。

### Last-Modified/If-Modified-Since配合Cache-Control

### Etag/If-None-Match配合Cache-Control
